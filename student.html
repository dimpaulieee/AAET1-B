<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Dashboard</title>
</head>
<body>

<h1>Student Dashboard</h1>

<h2>Reviewers for You</h2>
<div id="reviewerDisplay" style="font-size: 18px; margin-bottom: 10px;"></div>
<button id="nextBtn">Next Reviewer</button>

<script type="module">
import { db } from './js/firebase.js';
import { collection, getDocs } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

let reviewers = [];
let index = 0;
const display = document.getElementById('reviewerDisplay');
const nextBtn = document.getElementById('nextBtn');

async function loadReviewers() {
  const querySnapshot = await getDocs(collection(db, 'reviewers'));
  reviewers = querySnapshot.docs.map(doc => doc.data());
  showReviewer();
}

function showReviewer() {
  if (reviewers.length === 0) {
    display.innerText = 'No reviewers yet.';
    return;
  }

  const reviewer = reviewers[index];
  if (reviewer.link) {
    display.innerHTML = `<a href="${reviewer.link}" target="_blank">${reviewer.name} - ${reviewer.subject}</a>`;
  } else {
    display.innerText = `${reviewer.name} - ${reviewer.subject}`;
  }
}

nextBtn.addEventListener('click', () => {
  if (reviewers.length === 0) return;
  index = (index + 1) % reviewers.length; // loop through reviewers
  showReviewer();
});

loadReviewers();
</script>

</body>
</html>
